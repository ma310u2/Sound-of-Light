/* global $ */
$(window).on('load resize', function () {
    var w = $(window).width();
    var x = 833;
    var $hli = $("li.hli");
    if (w <= x) {
        $hli.hide().off("mouseover").off("mouseout");
        $("a").removeClass("li-hover");
    } else {
        $hli.mouseover(function () {
            $("#sub-list", this).stop().slideDown();
        })
        $hli.mouseout(function () {
            $("#sub-list", this).stop().slideUp();
        });
        $(".hli > a").addClass("li-hover");
    }
    $("#sub-list").hide();
    $('#icon ').removeClass('minus');
    $('#menu-icon ').removeClass('close');
    $('#menu-icon1 ').find("p").text("＋");
});


$(function () {
    var $hli = $("li.hli");
    var $link = $("a.link");
    var $menu1 = $('#menu-icon1');
    var $menu = $("#menu-icon");
    var $subli = $("#sub-list");


    $menu.click(function () {
        $(this).toggleClass("close");
        $hli.fadeToggle("slow");
        $subli.hide();
        $menu1.find("p").text("＋");
    });



    $link.click(function () {
        $("#icon").removeClass("minus");
        $menu.removeClass('close');
        $hli.hide();
    });

    $("#top").click(function () {
        $("html,body").animate({
            "scrollTop": 0
        }, 1000, 'swing');
    });

    $menu.mouseover(function () {
        $menu.addClass("hover");
    })
    $menu.mouseout(function () {
        $menu.removeClass("hover");
    });

    $menu1.click(function () {
        var $icon = $(this).find('#icon');

        $subli.slideToggle();
        if ($icon.hasClass('minus')) {
            $icon.removeClass('minus');
            // 子要素の＃タグの中身をtextメソッドを用いて書き換えてください
            $(this).find("p").text("＋");
        } else {
            $icon.addClass('minus');
            // 子要素の＃タグの中身をtextメソッドを用いて書き換えてください
            $(this).find("p").text("－");
        }
    });
    $('.service').click(function () {
        var service = $('#service').offset().top;
        $('html, body').animate({
            scrollTop: service
        });
    });
    //お問い合わせ
    var $name = $("input[name='name-sei']");
    var $namei = $("input[name='name-mei']");
    var $kana = $("input[name='kan-sei']");
    var $kanamei = $("input[name='kan-mei']");
    var $email = $("input[type='email']");
    var $mail1 = $("input[name='email1']");
    var $mail2 = $("input[name='email2']");
    var $textarea = $("textarea[name='message']");

    //半角　スペースアラート
    $("input[type='submit']").click(function () {
        if ($name.val().match(/^[ぁ-んァ-ヶー一-龠\r\n\t]+$/) && $namei.val().match(/^[ぁ-んァ-ヶー一-龠\r\n\t]+$/) && $kana.val().match(/^[ァ-ロワヲンー\r\n\t]+$/) && $kanamei.val().match(/^[ァ-ロワヲンー\r\n\t]+$/)) {} else {
            alert('半角、又はスペースがあります')
        }
    });

    $("input[type='submit']").click(function () {
        if ($textarea.val() == "") {
            $("#textarea").find("span").html('確認').css('color', 'red');
            $textarea.css("background-color", "#ffd3d3");
            alert('お問い合わせ内容を入力して下さい')
        }
    });

    //お問い合わせ確認　表示切替

    //ふりがな、カタカナ、ー、漢字、
    $name.change(function () {
        if (!$(this).val().match(/^[ぁ-んァ-ヶー一-龠\r\n\t]+$/)) {
            $("#name-sei").find("span").html('確認').css('color', 'red');
            $name.css("background-color", "#ffd3d3");
        } else {
            $("#name-sei").find("span").html('OK').css('color', 'green');
            $name.css("background-color", "transparent");
        }
    });
    $namei.change(function () {
        if (!$(this).val().match(/^[ぁ-んァ-ヶー一-龠\r\n\t]+$/)) {
            $("#name-mei").find("span").html('確認').css('color', 'red');
            $namei.css("background-color", "#ffd3d3");
        } else {
            $("#name-mei").find("span").html('OK').css('color', 'green');
            $namei.css("background-color", "transparent");
        }
    });
    //カタカナ、ー、
    $kana.change(function () {
        if (!$(this).val().match(/^[ァ-ロワヲンー\r\n\t]+$/)) {
            $("#kan-sei").find("span").html('確認').css('color', 'red');
            $kana.css("background-color", "#ffd3d3");
        } else {
            $("#kan-sei").find("span").html('OK').css('color', 'green');
            $kana.css("background-color", "transparent");
        }
    });

    $kanamei.change(function () {
        if (!$(this).val().match(/^[ァ-ロワヲンー\r\n\t]+$/)) {
            $("#kan-mei").find("span").html('確認').css('color', 'red');
            $kanamei.css("background-color", "#ffd3d3");
        } else {
            $("#kan-mei").find("span").html('OK').css('color', 'green');
            $kanamei.css("background-color", "transparent");
        }
    });

    //アルファベット、@、.、_、-
    //入力形式が@が無い場合、@から始まるなどメールアドレスの形式では無い場合も拒否
    $mail1.change(function () {
        if (!$(this).val().match(/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/)) {
            $("#email1").find("span").html('確認').css('color', 'red');
            $mail1.css("background-color", "#ffd3d3");
        } else {
            $("#email1").find("span").html('OK').css('color', 'green');
            $mail1.css("background-color", "transparent");
        }
    });

    $mail2.change(function () {
        if (!$(this).val().match(/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/)) {
            $("#email2").find("span").html('確認').css('color', 'red');
            $mail2.css("background-color", "#ffd3d3");
        } else {

        }
    });
    //アドレス一致
    $mail2.blur(function () {
        var mail_1 = $("#email_1").val();
        var mail_2 = $("#email_2").val();
        if (mail_1 != mail_2) {
            return false;
        } else {
            $("#email2").find("span").html('OK').css('color', 'green');
            $mail2.css("background-color", "transparent");
            return true;
        }
    });
    //HTMLコードを拒否、空白拒否
    $textarea.change(function () {
        if ($(this).val().match(/[<(.*)>.*<\/\1>]/) || $textarea.val() == "") {
            $("#textarea").find("span").html('確認').css('color', 'red');
            $textarea.css("background-color", "#ffd3d3")
        } else {
            $("#textarea").find("span").html('OK').css('color', 'green');
            $textarea.css("background-color", "transparent");
        }
    });

});
